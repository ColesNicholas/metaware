sei = DF.agg$se,
data = DF.agg,
predictor= "sei")
View(PEESE2)
PEESE2
pub.r$rho_0.5$peese
plot(DF.agg$yi, DF.agg$vi)
plot(DF.agg$yi, DF.agg$sei)
plot(DF.agg$yi, DF.agg$se)
View(DF.agg)
DF.agg$sei
DF.agg$sei
DF.es <- DF.es %>%
mutate(se = sqrt(es.var))
robu(
es ~ se,
data = DF.es,
studynum = id,
var.eff.size = es.var,
modelweights = "CORR",
rho = 0.5,
small = TRUE
)
library('robumeta')
robu(
es ~ se,
data = DF.es,
studynum = id,
var.eff.size = es.var,
modelweights = "CORR",
rho = 0.5,
small = TRUE
)
overall %>%
metafor::funnel(x = .,
hlines = "lightgray",
xlab = "Cohen's standardized d")
rma.uni(yi = es,
vi = es.var,
data = df,
mods = ~ se,
method = "REML")
rma.uni(yi = es,
vi = es.var,
data = DF.es,
mods = ~ se,
method = "REML")
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ se,
method = "REML")
lm(DF.agg$yi ~ DF.agg$se,
weights = 1 / DF.agg$vi) %>%
summary()
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ se,
method = "REML")
?rma.uni
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ se,
method = "FE")
lm(DF.agg$yi ~ DF.agg$se,
weights = 1 / DF.agg$vi)
lm(DF.agg$yi ~ DF.agg$se,
weights = 1 / DF.agg$vi) %>%
summary()
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ se,
method = "REML")
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ se,
method = "FE")
plot(DF.agg$yi, DF.agg$vi)
?plot
ggplot(DF.agg,
aes(x = yi, y = es)) +
geom_point()
ggplot(DF.agg,
aes(x = vi, y = yi)) +
geom_point()
ggplot(DF.agg,
aes(y = vi, x = yi)) +
geom_point()
ggplot(DF.agg,
aes(x = vi, y = yi)) +
geom_point()
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point()
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ vi,
method = "RE")
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ vi,
method = "RE")
rma.uni(yi = yi,
vi = vi,
data = DF.agg,
mods = ~ vi,
method = "REML")
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / (.32 +vi)
)
) +
geom_point()
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point() +
abline(lm(yi ~ vi,
weights = 1 / vi))
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point() +
abline(lm(DF$yi ~ DF$vi,
weights = 1 / DF$vi))
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point() +
abline(lm(DF.agg$yi ~ DF.agg$vi,
weights = 1 / DF.agg$vi))
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi),
color = "black",
show.legend = FALSE)
ggplot(DF.agg,
aes(x = vi, y = yi, size = 1 / (.32 +vi)
)
) +
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (.32 +vi)),
color = "black",
show.legend = FALSE)
pub.r$rho_0.5$funnel
pub.r$rho_0.5$df
write.csv(pub.r$rho_0.5$DF.agg, "tmp.df.csv")
read.csv("tmp.df.csv")
df <- read.csv("tmp.df.csv")
df %>% names()
write.csv(pub.r$rho_0.5$DF.agg
select(id, yi, vi, se),
row.names = F,
"tmp.df.csv")
library(tidyverse)
write.csv(pub.r$rho_0.5$DF.agg  %>%
select(id, yi, vi, se),
row.names = F,
"tmp.df.csv")
df <- read.csv("tmp.df.csv")
head(df)
ggplot(df,
aes(x = vi, y = yi) +
geom_point()
)
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
ggplot(df,
aes(x = vi, y = yi, size = 1 / vi)) +
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi),
color = "black",
show.legend = FALSE)
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")
rm(list = ls())
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
# get tau estimate
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")
View(tau)
tau
rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
library(tidyverse)
library(metafor)
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
library(ggplot)
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
library(ggplot2)
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2 %>%
sqrt()
library(tidyverse)
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2 %>%
sqrt()
library(metafor)
tau <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2 %>%
sqrt()
library(metafor)
library(ggplot2)
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
ggplot(df,
aes(x = vi, y = yi)) +
geom_point()
# get tau2 estimate
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  REML weighting
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi),
color = "black",
show.legend = FALSE)
tau2
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
tau2
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  REML weighting
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE)
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black",
show.legend = FALSE)
ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
library(gridExtra)
grid.arrange(p1, p2, p3)
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
p1 <- ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
# get tau2 estimate
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
# estimated relationship between vi and yi is NEGATIVE when using REML
p2 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE)
# estimated relationship between vi and yi is POSITIVE when using FE
p3 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black",
show.legend = FALSE)
# plot together
grid.arrange(p1, p2, p3)
library(metafor)
library(ggplot2)
library(gridExtra)
theme_set(theme_minimal())
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
p1 <- ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
# get tau2 estimate
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
# estimated relationship between vi and yi is NEGATIVE when using REML
p2 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE) +
ggtitle("REML weighting")
# estimated relationship between vi and yi is POSITIVE when using FE
p3 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black",
show.legend = FALSE) +
ggtitle("FE weighting")
# plot together
grid.arrange(p1, p2, p3)
?grid.arrange
?grid.arrange(p1, p2, p3,
nrow = 2)
grid.arrange(p1, p2, p3,
nrow = 2)
?theme_set
?theme_minimal
library(metafor)
library(ggplot2)
library(gridExtra)
theme_set(theme_minimal(legend.position = "none"))
# load dataframe
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
p1 <- ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
# get tau2 estimate
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
# estimated relationship between vi and yi is NEGATIVE when using REML
p2 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE) +
ggtitle("REML weighting")
# estimated relationship between vi and yi is POSITIVE when using FE
p3 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black",
show.legend = FALSE) +
ggtitle("FE weighting")
# plot together
grid.arrange(p1, p2, p3,
nrow = 2)
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black") +
ggtitle("FE weighting")
library(metafor)
library(ggplot2)
library(gridExtra)
theme_set(theme_minimal(legend.position = "none",
guides(size = FALSE)))
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE) +
ggtitle("REML weighting")
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black",
show.legend = FALSE) +
ggtitle("REML weighting") +
guides(size = FALSE)
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black") +
ggtitle("REML weighting") +
guides(size = FALSE)
theme_set(theme_minimal(legend.position = "none",
guides(size = "none")))
ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black") +
ggtitle("FE weighting")
theme_set(theme_minimal)
df <- read.csv("tmp.df.csv")
# normal funnel plot shows strong negative relationship between vi and yi
p1 <- ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
# get tau2 estimate
tau2 <- rma.uni(yi = yi,
vi = vi,
data = df,
method = "REML")$tau2
# estimated relationship between vi and yi is NEGATIVE when using REML
p2 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / (tau2 + vi))) + #  show REML weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / (tau2 + vi)), #  REML weighting
color = "black") +
ggtitle("REML weighting") +
guides(size = "none")
p3 <- ggplot(df,
aes(x = vi,
y = yi,
size = 1 / vi)) + # show FE weighting for points
geom_point() +
geom_smooth(method = "lm",
mapping = aes(weight = 1 / vi), #  FE weighting
color = "black") +
ggtitle("FE weighting") +
guides(size = "none")
grid.arrange(p1, p2, p3,
nrow = 2)
p1 <- ggplot(df,
aes(x = vi, y = yi)) +
geom_point() +
ggtitle("funnel plot")
p1
