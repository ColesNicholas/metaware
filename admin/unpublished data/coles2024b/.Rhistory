# set up packages
library(tidyverse)
library(qualtRics)
qualtrics_api_credentials(
api_key = 'urh7PtWEEOkAzrbjmYQC2FoipCvCT4n8ZIByL5rH',
base_url = 'iad1.qualtrics.com',
install = TRUE,
overwrite = TRUE)
readRenviron("~/.Renviron")
DF <- fetch_survey(surveyID = 'SV_1YQ3FmlbEHp1RIO',
force_request = T,
label = F,
convert = F)
# Dangs API credential at UCSD
qualtrics_api_credentials(
api_key = 'urh7PtWEEOkAzrbjmYQC2FoipCvCT4n8ZIByL5rH',
base_url = 'iad1.qualtrics.com',
install = TRUE,
overwrite = TRUE)
readRenviron("~/.Renviron")
# open data
DF <- fetch_survey(surveyID = 'SV_1YQ3FmlbEHp1RIO',
force_request = T,
label = F,
convert = F)
# process data
DF <- DF %>%
# remove incomplete or test observations
filter(DistributionChannel != "preview",
Progress > 95,
!is.na(stim_lef_sma_mkn)) %>%
# select relevant variables
select(
# subject data
ResponseId, sex, age, attention_check,
# lab data
lab, modality, incentive,
# task data
orientation, info,
stim_lef_sma_mkn : prq_w_2) %>%
# identify conditions
pivot_longer(cols = stim_lef_sma_mkn : stim_lef_sma_mky,
names_to = "trial") %>%
rowwise() %>%
mutate(info.pres =
if_else(condition = grepl("mky", trial),
true = "yes",
false = "no"),
just =
if_else(condition = grepl("lef", trial),
true = "left",
false = "right")) %>%
ungroup() %>%
# fix variable classes
mutate_at(vars(info.pres, just),
as.factor)
get.wd()
getwd()
write.csv(DF, "coles2024b.csv")
